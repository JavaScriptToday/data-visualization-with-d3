<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Visualization with D3</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"
      integrity="sha512-vc58qvvBdrDR4etbxMdlTt4GBQk1qjvyORR2nrsPsFPyrs+/u5c3+1Ct6upOgdZoIl7eq6k3a1UPDSNAQi/32A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    <script>
      d3.csv('aggregated_data.csv').then((data) => {
          const aggregatedData = d3.group(data, d => d.category);

          // Calculate sum of values for each category
          const sumByCategory = new Map();
          aggregatedData.forEach((value, key) => {
              const sum = d3.sum(value, d => d.value);
              sumByCategory.set(key, sum);
          });

          console.log(sumByCategory);
      }).catch((error) => {
          console.error("Error loading data: ", error);
      });
    </script>
  </body>
</html>
